<div id="archive">
  <table class="post-table">
    <% var year = 0 %>
    <% var change = false %>
    <% var field_sort = theme.archive.sort_updated ? 'updated' : 'date' %>
    <% page.posts.sort(field_sort, 'desc').each(function(post) { %>
      <% var itemYear = date(post[field_sort], 'YYYY') - 0 %>
      <% change = year !== itemYear %>
      <% year = change ? itemYear : year %>
      <% if (change) { %>
        <tr><td colspan=3 class="post-year"><h2><%= year %></h2></td></tr>
      <% } %>
      <tr class="post-row">
	      <td><%- partial('_partial/post/date', { post: post, class_name: 'cell' }) %></td>
	      <td><%- partial('_partial/post/title', { post: post, index: true, class_name: '' }) %></td>
        <td class="cell"><%= (post.venue) ? '[' + post.venue + ']' : '' %></td>
      </tr>
    <% }); %>
    </table>
  <%- partial('_partial/pagination') %>
</div>
